<?php
// Duplicate email error (SQLSTATE 23000 for integrity constraint violation)
if ($e->getCode() === '23000') {
$errors[] = 'That email is already registered.';
} else {
$errors[] = 'Something went wrong. Please try again.';
}
}
}
}
?>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Register</title>
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f7f7fb; }
.card { max-width: 420px; margin: 5vh auto; background: #fff; padding: 24px; border-radius: 16px; box-shadow: 0 10px 24px rgba(0,0,0,.08); }
.form-row { margin-bottom: 14px; }
label { display:block; margin-bottom:6px; font-weight:600; }
input { width:100%; padding:12px; border-radius:10px; border:1px solid #d9d9e3; outline:none; }
input:focus { border-color:#6b7cff; box-shadow: 0 0 0 3px rgba(107,124,255,.15); }
.btn { width:100%; padding:12px; border:0; border-radius:10px; background:#6b7cff; color:#fff; font-weight:700; cursor:pointer; }
.btn:hover { filter: brightness(.95); }
.errors { background:#ffecec; color:#b10000; border:1px solid #ffb3b3; padding:12px; border-radius:10px; margin-bottom:14px; }
.helper { font-size:12px; color:#666; margin-top:4px; }
</style>
</head>
<body>
<div class="card">
<h2 style="margin-top:0">Create your account</h2>


<?php if ($errors): ?>
<div class="errors">
<ul style="margin:0 0 0 18px;">
<?php foreach ($errors as $err): ?>
<li><?= htmlspecialchars($err, ENT_QUOTES, 'UTF-8') ?></li>
<?php endforeach; ?>
</ul>
</div>
<?php endif; ?>


<form method="post" action="">
<input type="hidden" name="csrf_token" value="<?= htmlspecialchars($_SESSION['csrf_token'], ENT_QUOTES, 'UTF-8') ?>">


<div class="form-row">
<label for="full_name">Full name</label>
<input id="full_name" name="full_name" type="text" required value="<?= $old['full_name'] ?>">
</div>


<div class="form-row">
<label for="email">Email</label>
<input id="email" name="email" type="email" required value="<?= $old['email'] ?>">
</div>


<div class="form-row">
<label for="password">Password</label>
<input id="password" name="password" type="password" required>
<div class="helper">At least 8 characters.</div>
</div>


<div class="form-row">
<label for="confirm_password">Confirm password</label>
<input id="confirm_password" name="confirm_password" type="password" required>
</div>


<button class="btn" type="submit">Sign up</button>
<p class="helper" style="text-align:center;margin-top:10px;">Already have an account? <a href="login.php">Log in</a></p>
</form>
</div>
</body>
</html>